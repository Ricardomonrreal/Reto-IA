<div class="game-container">
    <div #renderCanvas class="canvas-container"></div>
    
    <div class="ui-panel">
        <div class="title">
            PARQUE INDUSTRIAL SOSTENIBLE
        </div>

        <div class="score">
            <div class="stat-row">
                PRESUPUESTO: <span style="color: #ffff00;">{{ money }}‚Ç¨</span>
            </div>
            <div class="stat-row" style="font-size: 11px; color: #aaffaa;">
                Turno: {{ turnCount }} | Ingreso/turno: {{ incomePerTurn }}‚Ç¨
            </div>
            
            <div class="industry-stats">
                <div class="stat-row">
                    <span class="stat-label">Producci√≥n:</span>
                    <span class="stat-value production">{{ totalProduction }} Unidades</span>
                    <span style="font-size: 10px; color: #88ff88;" *ngIf="productionMultiplier > 1">
                        (x{{ productionMultiplier.toFixed(2) }})
                    </span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Residuos:</span>
                    <span class="stat-value waste">{{ totalWaste }} kg/h</span>
                    <span style="font-size: 10px; color: #88ff88;" *ngIf="wasteReductionBonus > 0">
                        (-{{ wasteReductionBonus }})
                    </span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">üî¨ Innovaci√≥n:</span>
                    <span class="stat-value innovation">{{ innovationIndex }}%</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">üõ°Ô∏è Resiliencia:</span>
                    <span class="stat-value" [style.color]="resilienceIndex > 50 ? '#00ff00' : '#ffaa00'">
                        {{ resilienceIndex }}%
                    </span>
                </div>
            </div>
        </div>

        <div class="subtitle">EDIFICIOS Y TECNOLOG√çAS:</div>
        
        <button
            class="building-btn eraser-btn"
            [class.selected]="selectedBuilding === 'eraser'"
            (click)="selectBuilding('eraser')">
            <span>üóëÔ∏è BORRADOR</span>
            <div class="building-info">
                Devuelve 50% del costo (Tecla Del)
            </div>
        </button>
        
        @for (building of industrialBuildingsUI | keyvalue; track building.key) {
            <button
                class="building-btn"
                [class.selected]="selectedBuilding === building.key"
                [disabled]="money < building.value.cost && selectedBuilding !== building.key"
                (click)="selectBuilding(building.key)">
                <span>{{ building.value.icon }} {{ building.value.name }}</span>
                <div class="building-info" style="font-size: 10px;">
                    üí∞ {{ building.value.cost }}‚Ç¨ | üì¶ {{ building.value.production }} Unid
                    <br>
                    üî¨ +{{ building.value.innovationBonus }}% | üõ°Ô∏è +{{ building.value.resilienceBonus }}%
                    <br>
                    üîß Mantenimiento: {{ building.value.maintenanceCost }}‚Ç¨/turno
                </div>
            </button>
        }

        <div class="instructions-bottom">
            <div style="color: #ffff00; margin-bottom: 5px;">üéØ OBJETIVOS ODS 9:</div>
            <div style="font-size: 11px;">
                <div>‚úì Infraestructura resiliente (>50%)</div>
                <div>‚úì Industrializaci√≥n sostenible</div>
                <div>‚úì Fomentar innovaci√≥n (>50%)</div>
            </div>
            
            <div style="margin-top: 8px; padding-top: 8px; border-top: 1px solid #00ff00;">
                <strong style="color: #ffaa00;">üí° MEC√ÅNICAS:</strong>
                <div style="font-size: 10px; margin-top: 4px;">
                    ‚Ä¢ Cada 10s = 1 turno autom√°tico
                    ‚Ä¢ Innovaci√≥n aumenta producci√≥n
                    ‚Ä¢ Resiliencia genera bonos
                    ‚Ä¢ Edificios cercanos = sinergia
                    ‚Ä¢ Exceso de residuos = penalizaci√≥n
                </div>
            </div>
        </div>
    </div>

    <div class="instructions-panel">
        <div class="instructions-title">CONTROLES</div>
        <div>
            <span style="color: #ffff00;">Click Izquierdo</span>: Colocar Edificio
        </div>
        <div>
            <span style="color: #ffff00;">Click Derecho</span>: Borrar R√°pido
        </div>
        <div>
            <span style="color: #ffff00;">Mouse Wheel</span>: Zoom (Acercar/Alejar)
        </div>
        <div>
            <span style="color: #ffff00;">Click Medio/Der</span>: Mover C√°mara (Panear)
        </div>
        <div>
            <span style="color: #ffff00;">Teclas W/A/S/D</span>: Mover C√°mara
        </div>
        <div>
            <span style="color: #ffff00;">Tecla Del</span>: Modo Borrador
        </div>

        <div style="margin-top: 12px; padding-top: 8px; border-top: 1px solid #00ff00;">
            <div style="color: #ffffee; font-weight: bold; margin-bottom: 5px;">üìã EDIFICIOS:</div>
            <div style="font-size: 10px;">
                <div><strong>üè≠ F√°brica Limpia:</strong> Producci√≥n eficiente</div>
                <div><strong>üî¨ Centro I+D:</strong> +Innovaci√≥n (cerca de f√°bricas)</div>
                <div><strong>‚ôªÔ∏è Reciclaje:</strong> Reduce residuos (cerca de todo)</div>
                <div><strong>üì¶ Almac√©n:</strong> +Resiliencia, bajo costo</div>
                <div><strong>‚òÄÔ∏è Panel Solar:</strong> Energ√≠a limpia</div>
                <div><strong>üåê Hub Inteligente:</strong> Max innovaci√≥n</div>
            </div>
        </div>
    </div>

    <div class="action-indicator"
        [class.eraser-mode]="(selectedBuilding ?? '') === 'eraser'">
    
        <span *ngIf="(selectedBuilding ?? '') === 'eraser'">MODO BORRADOR</span>

        <span *ngIf="selectedBuilding && selectedBuilding !== 'eraser'">
            COLOCANDO: {{ industrialBuildingsUI[selectedBuilding].name || 'NADA' }}
        </span>
        
        <span *ngIf="!selectedBuilding">
            MODO SELECCI√ìN: Ninguno
        </span>
    </div>

    <div class="alert-panel"
        [class.alert-success]="totalWaste <= maxWasteTarget"
        [class.alert-danger]="totalWaste > maxWasteTarget">
        <div *ngIf="totalWaste <= maxWasteTarget" class="alert-content">
            <span class="alert-icon">‚úì</span>
            <div>
                <strong>INDUSTRIA SOSTENIBLE</strong>
                <div class="alert-sub">Residuos bajo control y eficiencia alta</div>
            </div>
        </div>
        <div *ngIf="totalWaste > maxWasteTarget" class="alert-content">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div>
                <strong>ALERTA DE RESIDUOS</strong>
                <div class="alert-sub">Necesitas m√°s gesti√≥n de residuos o f√°bricas limpias</div>
            </div>
        </div>
    </div>
    <!-- Notificaci√≥n de Logros ODS -->
<div class="achievement-notification" *ngIf="showAchievementNotification">
    <div class="achievement-content">
        <div class="achievement-header">
            <span class="achievement-icon">üéØ</span>
            <h3>{{ achievementTitle }}</h3>
        </div>
        <p class="achievement-text">{{ achievementMessage }}</p>
        <div class="achievement-footer">
            <strong>ODS 9:</strong> Industria, Innovaci√≥n e Infraestructura
        </div>
    </div>
</div>
</div>