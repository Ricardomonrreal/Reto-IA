<div class="game-container">
  <div #renderCanvas class="canvas-container"></div>

  <div class="ui-panel">
    <div class="title">
      PARQUE INDUSTRIAL SOSTENIBLE
    </div>

    <div class="score">
      <div class="stat-row">
        PRESUPUESTO: <span style="color: #ffff00;">{{ money }}â‚¬</span>
      </div>
      <div class="stat-row" style="font-size: 11px; color: #aaffaa;">
        Turno: {{ turnCount }} | Ingreso/turno: {{ incomePerTurn }}â‚¬
      </div>

      <div class="industry-stats">
        <div class="stat-row">
          <span class="stat-label">ProducciÃ³n:</span>
          <span class="stat-value production">{{ totalProduction }} Unidades</span>
          <span style="font-size: 10px; color: #88ff88;" *ngIf="productionMultiplier > 1">
            (x{{ productionMultiplier.toFixed(2) }})
          </span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Residuos:</span>
          <span class="stat-value waste">{{ totalWaste }} kg/h</span>
          <span style="font-size: 10px; color: #88ff88;" *ngIf="wasteReductionBonus > 0">
            (-{{ wasteReductionBonus }})
          </span>
        </div>
        <div class="stat-row">
          <span class="stat-label">ğŸ”¬ InnovaciÃ³n:</span>
          <span class="stat-value innovation">{{ innovationIndex }}%</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">ğŸ›¡ï¸ Resiliencia:</span>
          <span class="stat-value" [style.color]="resilienceIndex > 50 ? '#00ff00' : '#ffaa00'">
            {{ resilienceIndex }}%
          </span>
        </div>
      </div>
    </div>

    <div class="subtitle">EDIFICIOS Y TECNOLOGÃAS:</div>

    <button
      class="building-btn eraser-btn"
      [class.selected]="selectedBuilding === 'eraser'"
      (click)="selectBuilding('eraser')"
    >
      <span>ğŸ—‘ï¸ BORRADOR</span>
      <div class="building-info">
        Devuelve 50% del costo (Tecla Del)
      </div>
    </button>

    @for (building of industrialBuildingsUI | keyvalue; track building.key) {
      <button
        class="building-btn"
        [class.selected]="selectedBuilding === building.key"
        [disabled]="money < building.value.cost && selectedBuilding !== building.key"
        (click)="selectBuilding(building.key)"
      >
        <span>{{ building.value.icon }} {{ building.value.name }}</span>
        <div class="building-info" style="font-size: 10px;">
          ğŸ’° {{ building.value.cost }}â‚¬ | ğŸ“¦ {{ building.value.production }} Unid
          <br />
          ğŸ”¬ +{{ building.value.innovationBonus }}% | ğŸ›¡ï¸ +{{ building.value.resilienceBonus }}%
          <br />
          ğŸ”§ Mantenimiento: {{ building.value.maintenanceCost }}â‚¬/turno
        </div>
      </button>
    }

    <div class="instructions-bottom">
      <div style="color: #ffff00; margin-bottom: 5px;">ğŸ¯ OBJETIVOS ODS 9:</div>
      <div style="font-size: 11px;">
        <div>âœ“ Infraestructura resiliente (>50%)</div>
        <div>âœ“ IndustrializaciÃ³n sostenible</div>
        <div>âœ“ Fomentar innovaciÃ³n (>50%)</div>
      </div>

      <div
        style="margin-top: 8px; padding-top: 8px; border-top: 1px solid #00ff00;"
      >
        <strong style="color: #ffaa00;">ğŸ’¡ MECÃNICAS:</strong>
        <div style="font-size: 10px; margin-top: 4px;">
          â€¢ Cada 10s = 1 turno automÃ¡tico <br />
          â€¢ InnovaciÃ³n aumenta producciÃ³n <br />
          â€¢ Resiliencia genera bonos <br />
          â€¢ Edificios cercanos = sinergia <br />
          â€¢ Exceso de residuos = penalizaciÃ³n
        </div>
      </div>
    </div>
  </div>

  <div class="instructions-panel">
    <div class="instructions-title">CONTROLES</div>
    <div><span style="color: #ffff00;">Click Izquierdo</span>: Colocar Edificio</div>
    <div><span style="color: #ffff00;">Click Derecho</span>: Borrar RÃ¡pido</div>
    <div><span style="color: #ffff00;">Mouse Wheel</span>: Zoom (Acercar/Alejar)</div>
    <div><span style="color: #ffff00;">Click Medio/Der</span>: Mover CÃ¡mara (Panear)</div>
    <div><span style="color: #ffff00;">Teclas W/A/S/D</span>: Mover CÃ¡mara</div>
    <div><span style="color: #ffff00;">Tecla Del</span>: Modo Borrador</div>

    <div
      style="margin-top: 12px; padding-top: 8px; border-top: 1px solid #00ff00;"
    >
      <div
        style="color: #ffffee; font-weight: bold; margin-bottom: 5px;"
      >
        ğŸ“‹ EDIFICIOS:
      </div>
      <div style="font-size: 10px;">
        <div><strong>ğŸ­ FÃ¡brica Limpia:</strong> ProducciÃ³n eficiente</div>
        <div><strong>ğŸ”¬ Centro I+D:</strong> +InnovaciÃ³n (cerca de fÃ¡bricas)</div>
        <div><strong>â™»ï¸ Reciclaje:</strong> Reduce residuos (cerca de todo)</div>
        <div><strong>ğŸ“¦ AlmacÃ©n:</strong> +Resiliencia, bajo costo</div>
        <div><strong>â˜€ï¸ Panel Solar:</strong> EnergÃ­a limpia</div>
        <div><strong>ğŸŒ Hub Inteligente:</strong> Max innovaciÃ³n</div>
      </div>
    </div>
  </div>

  <div
    class="action-indicator"
    [class.eraser-mode]="(selectedBuilding ?? '') === 'eraser'"
  >
    <span *ngIf="(selectedBuilding ?? '') === 'eraser'">MODO BORRADOR</span>

    <span *ngIf="selectedBuilding && selectedBuilding !== 'eraser'">
      COLOCANDO: {{ industrialBuildingsUI[selectedBuilding].name || 'NADA' }}
    </span>

    <span *ngIf="!selectedBuilding">
      MODO SELECCIÃ“N: Ninguno
    </span>
  </div>

  <div
    class="alert-panel"
    [class.alert-success]="totalWaste <= maxWasteTarget"
    [class.alert-danger]="totalWaste > maxWasteTarget"
  >
    <div *ngIf="totalWaste <= maxWasteTarget" class="alert-content">
      <span class="alert-icon">âœ“</span>
      <div>
        <strong>INDUSTRIA SOSTENIBLE</strong>
        <div class="alert-sub">Residuos bajo control y eficiencia alta</div>
      </div>
    </div>
    <div *ngIf="totalWaste > maxWasteTarget" class="alert-content">
      <span class="alert-icon">âš ï¸</span>
      <div>
        <strong>ALERTA DE RESIDUOS</strong>
        <div class="alert-sub">Necesitas mÃ¡s gestiÃ³n de residuos o fÃ¡bricas limpias</div>
      </div>
    </div>
  </div>

  <!-- NotificaciÃ³n de Logros ODS -->
  <div
    class="achievement-notification"
    *ngIf="showAchievementNotification"
  >
    <div class="achievement-content">
      <div class="achievement-header">
        <span class="achievement-icon">ğŸ¯</span>
        <h3>{{ achievementTitle }}</h3>
      </div>
      <p class="achievement-text">{{ achievementMessage }}</p>
      <div class="achievement-footer">
        <strong>ODS 9:</strong> Industria, InnovaciÃ³n e Infraestructura
      </div>
    </div>
  </div>

  <!-- ğŸ”™ BotÃ³n para volver al menÃº de niveles -->
  <div class="boton-volver-container">
    <button class="boton-volver" (click)="goToMenu()">
      â¬… Volver a Niveles
    </button>
  </div>

  
</div>
