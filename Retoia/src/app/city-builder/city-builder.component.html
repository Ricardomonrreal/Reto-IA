<body>
    <div class="game-container">
        <div #renderCanvas class="canvas-container"></div>

    <!-- UI Overlay -->
    <div class="ui-panel"
        (click)=$event.stopPropagation()>
        <div class="title">CIUDADES Y COMUNIDADES SOSTENIBLES ODS 11</div>
        <div class="subtitle">SELECCIONA CATEGOR√çA:</div>

        <!-- ‚¨ÖÔ∏è NAVEGACI√ìN DE CATEGOR√çAS -->
        <div class="category-nav">
            <button 
                *ngFor="let category of ['Edificios', 'Casas', 'Calles', 'Decoraci√≥n']"
                (click)="selectCategory($any(category))"
                [class.selected-tab]="selectedCategory === category"
                class="category-btn"
            >
                {{ category }}
            </button>
        </div>
        <!-- ------------------------------ -->

        <div class="subtitle current-category">
            Elementos de {{ selectedCategory }}
        </div>
        
        <!-- Bot√≥n Borrador (Vertical, siempre visible) -->
        <button
        (click)="selectBuilding('eraser')"
        [class.selected]="selectedBuilding === 'eraser'"
        class="eraser-btn"
        >
            üóëÔ∏è BORRADOR<br/>
            <span class="building-info">
            Elimina (Del/Supr)
            </span>
        </button>

        <!-- Contenedor de la lista de edificios (Scroll horizontal) -->
        <div class="building-list-container">
            <!-- ‚¨ÖÔ∏è FILTRADO CONDICIONAL DE BOTONES -->
            <ng-container *ngFor="let buildingKey of buildingCategories[selectedCategory]">
                <!-- Usamos 'let building' para obtener los datos de buildingUIData -->
                <ng-container *ngIf="buildingUIData[buildingKey] as building">
                    <button
                        (click)="selectBuilding(buildingKey)"
                        [class.selected]="selectedBuilding === buildingKey"
                        class="building-btn"
                    >
                        <img [src]="building.thumb" 
                            alt="{{ building.name }}" 
                            class="building-thumbnail"> 
                        
                        <span class="building-name">{{ building.name }}</span>
                    </button>
                </ng-container>
            </ng-container>
        </div>

        <div class="instructions-bottom">
            <strong>Clic izquierdo:</strong> Construir/Borrar<br/>
            <strong>Clic derecho:</strong> Borrar r√°pido<br/>
            <strong>Tecla R:</strong> Rotar edificio
        </div>
    </div>
            <div class="stats-panel">
            <h3>üìä Estad√≠sticas de la Ciudad</h3>
            <p>
                <strong>Habitantes:</strong> {{ totalInhabitants }}
            </p>
            <p>
                <strong>√Årea Verde Total:</strong> 
                {{ totalGreenAreaM2.toFixed(1) }} m¬≤
            </p>
            <p>
                <strong>√Årea Verde Necesaria:</strong> 
                {{ requiredGreenAreaM2.toFixed(1) }} m¬≤ (9m¬≤/hab)
            </p>
            
            <hr>
            
            <p [ngClass]="{'deficit-alert': greenAreaDeficit < 0, 'surplus-ok': greenAreaDeficit >= 0}">
                <strong>D√©ficit/Super√°vit:</strong> 
                {{ greenAreaDeficit.toFixed(1) }} m¬≤
            </p>

            <div *ngIf="greenAreaDeficit < 0" class="validation-message alert">
                ‚ö†Ô∏è ¬°NECESITAS M√ÅS ESPACIOS VERDES!
            </div>
            <div *ngIf="greenAreaDeficit >= 0" class="validation-message ok">
                ‚úÖ √Årea Verde Suficiente.
            </div>
        </div>
    </div>
    <div class="boton-volver-container">
    <button class="boton-volver" (click)="goToMenu()">
      ‚¨Ö Volver a Niveles
    </button>
  </div>
</body>