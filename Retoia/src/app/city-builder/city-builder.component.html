<body>
    <div class="game-container">
        <div #renderCanvas class="canvas-container"></div>

    <div class="ui-panel"
        (click)=$event.stopPropagation()>
        <div class="title">CIUDADES Y COMUNIDADES SOSTENIBLES ODS 11</div>
        <div class="subtitle">SELECCIONA CATEGOR√çA:</div>

        <div class="category-nav">
            <button 
                *ngFor="let category of ['Edificios', 'Casas', 'Calles', 'Decoraci√≥n']"
                (click)="selectCategory($any(category))"
                [class.selected-tab]="selectedCategory === category"
                class="category-btn"
            >
                {{ category }}
            </button>
        </div>
        <div class="subtitle current-category">
            Elementos de {{ selectedCategory }}
        </div>
        
        <button
        (click)="selectBuilding('eraser')"
        [class.selected]="selectedBuilding === 'eraser'"
        class="eraser-btn"
        >
            üóëÔ∏è BORRADOR<br/>
            <span class="building-info">
            Elimina (Del/Supr)
            </span>
        </button>

        <div class="building-list-container">
            <ng-container *ngFor="let buildingKey of buildingCategories[selectedCategory]">
                <ng-container *ngIf="buildingUIData[buildingKey] as building">
                    <button
                        (click)="selectBuilding(buildingKey)"
                        [class.selected]="selectedBuilding === buildingKey"
                        class="building-btn"
                    >
                        <img [src]="building.thumb" 
                            alt="{{ building.name }}" 
                            class="building-thumbnail"> 
                        
                        <span class="building-name">{{ building.name }}</span>
                    </button>
                </ng-container>
            </ng-container>
        </div>

        <div class="instructions-bottom">
            <strong>Clic izquierdo:</strong> Construir/Borrar<br/>
            <strong>Clic derecho:</strong> Borrar r√°pido<br/>
            <strong>Tecla R:</strong> Rotar edificio<br/>
            <br>
            <strong style="font-size: medium;">
                Tu objetivo es alcanzar el m√≠nimo ideal de √°reas verdes en m¬≤ agregando objetos dentro del panel Decoraci√≥n e instalar una ruta de transporte p√∫blico usando objetos de paradas.
            </strong>
        </div>
    </div>
            <div class="stats-panel">
            <h3>Econom√≠a y Objetivos</h3>
            <p>
                <strong>Presupuesto:</strong> 
                <span [ngClass]="{'deficit-alert': currentBudget < 500}">
                    ${{ currentBudget | number: '1.0-0' }}
                </span>
            </p>
            
            <hr>
            
            <h4>Transporte P√∫blico</h4>
            <p>
                <strong>Requisito M√≠nimo:</strong> 5 Bancas instaladas
            </p>
            <p [ngClass]="{'deficit-alert': !transportPublicoCompletado, 'surplus-ok': transportPublicoCompletado}">
                <strong>Estado:</strong> 
                {{ transportPublicoCompletado ? '‚úÖ RUTA COMPLETA' : '‚ùå RUTA INCOMPLETA' }}
            </p>

            <div *ngIf="transportPublicoCompletado" class="validation-message ok">
                ‚úÖ Objetivo de Transporte Cumplido.
            </div>
            <div *ngIf="!transportPublicoCompletado" class="validation-message alert">
                ‚ö†Ô∏è ¬°Necesitas m√°s bancas para la ruta!
            </div>
            <hr>

            <h3>Estad√≠sticas de la Ciudad</h3>
            <p>
                <strong>Habitantes:</strong> {{ totalInhabitants }}
            </p>
            <p>
                <strong>√Årea Verde Total:</strong> 
                {{ totalGreenAreaM2.toFixed(1) }} m¬≤
            </p>
            <p>
                <strong>√Årea Verde Necesaria:</strong> 
                {{ requiredGreenAreaM2.toFixed(1) }} m¬≤ (9m¬≤/hab)
            </p>
            
            <hr>
            
            <p [ngClass]="{'deficit-alert': greenAreaDeficit < 0, 'surplus-ok': greenAreaDeficit >= 0}">
                <strong>D√©ficit/Super√°vit:</strong> 
                {{ greenAreaDeficit.toFixed(1) }} m¬≤
            </p>

            <div *ngIf="greenAreaDeficit < 0" class="validation-message alert">
                ‚ö†Ô∏è ¬°NECESITAS M√ÅS ESPACIOS VERDES!
            </div>
            <div *ngIf="greenAreaDeficit >= 0" class="validation-message ok">
                ‚úÖ √Årea Verde Suficiente.
            </div>
        </div>
    </div>
</body>